jQuery(document).ready(function($){
         'use strict';

//////////////////////////////////////////////////// CHECKING DEVICES & VIEWPORT WIDTH
var isMobile = {
    Android: function() {
        return navigator.userAgent.match(/Android/i);
    },
    BlackBerry: function() {
        return navigator.userAgent.match(/BlackBerry/i);
    },
    iOS: function() {
        return navigator.userAgent.match(/iPhone|iPad|iPod/i);
    },
    Opera: function() {
        return navigator.userAgent.match(/Opera Mini/i);
    },
    Windows: function() {
        return navigator.userAgent.match(/IEMobile/i);
    },
    any: function() {
        return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());
    }
};

        
var $windowWidth = {
    any: function() {
        return window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
    }
};
        
     
               
        
////////////////////////////////////////////////////PRELOADER

function mainPreLoader(){
    // Preload the page with jPreLoader
    if($('body').hasClass('pre-loader')){
    $('body').jpreLoader({
        splashID: "#jSplash",
        showSplash: true,
        showPercentage: true,
        autoClose: true,
        splashFunction: function () {
            $('#circle').delay(0).animate({
                'opacity': 1
            }, 500, 'linear');
        }
    });
  }
};        
        
        
////////////////////////////////////////////////////Top bar

function topBarBlock(){
    
    var topContainer = $("#top-bar");
    var topTrigger = $("#top-open");
    
    if(topTrigger.length){

    topTrigger.click(function () {

        topContainer.animate({
            height: "toggle"
        }, 1000, 'easeOutCubic');

        if (topTrigger.hasClass('tab-closed')) {
            topTrigger.removeClass('tab-closed');
            $('.bar-cols').removeClass('fadeUpin');;
        } else {
            topTrigger.addClass('tab-closed');
            $('.bar-cols').addClass('fadeUpin');
        }

        return false;

    });

    }
}



////////////////////////////////////////////////////revolution slider
 function revSliderCarousel(){        
        var tpj=jQuery;
					
					var revapi16;
					tpj(document).ready(function() {
                        if(tpj("#rev_slider_16_1").length){
						if(tpj("#rev_slider_16_1").revolution == undefined){
							revslider_showDoubleJqueryError("#rev_slider_16_1");
						}else{
							revapi16 = tpj("#rev_slider_16_1").show().revolution({
								sliderType:"carousel",
								jsFileLocation:"revolution/js/",
								sliderLayout:"fullwidth",
								dottedOverlay:"none",
								delay:9000,
								navigation: {
									keyboardNavigation:"off",
									keyboard_direction: "horizontal",
									mouseScrollNavigation:"off",
									onHoverStop:"off",
									tabs: {
										style:"zeus",
										enable:true,
										width:150,
										height:30,
										min_width:100,
										wrapper_padding:0,
										wrapper_color:"transparent",
										wrapper_opacity:"0",
										tmp:'<span class="tp-tab-title">{{title}}</span>',
										visibleAmount: 3,
										hide_onmobile: true,
										hide_under:480,
										hide_onleave:false,
										hide_delay:200,
										direction:"horizontal",
										span:true,
										position:"inner",
										space:1,
										h_align:"center",
										v_align:"top",
										h_offset:0,
										v_offset:30
									}
								},
								carousel: {
									horizontal_align: "center",
									vertical_align: "center",
									fadeout: "on",
									vary_fade: "on",
									maxVisibleItems: 3,
									infinity: "on",
									space: 0,
									stretch: "off"
								},
								responsiveLevels:[1240,1024,778,480],
								gridwidth:[800,640,480,480],
								gridheight:[720,720,480,360],
								lazyType:"none",
								parallax: {
									type:"scroll",
									origo:"enterpoint",
									speed:400,
									levels:[5,10,15,20,25,30,35,40,45,50],
								},
								shadow:0,
								spinner:"off",
								stopLoop:"on",
								stopAfterLoops:0,
								stopAtSlide:1,
								shuffle:"off",
								autoHeight:"off",
								disableProgressBar:"on",
								hideThumbsOnMobile:"off",
								hideSliderAtLimit:0,
								hideCaptionAtLimit:0,
								hideAllCaptionAtLilmit:0,
								debugMode:false,
								fallbacks: {
									simplifyAll:"off",
									nextSlideOnWindowFocus:"off",
									disableFocusListener:false,
								}
							});
						}
                        }
					});	/*ready*/
}    
        

////////////////////////////////////////////////////responsive nav with left logo

        
        
function navTrigger() {
    // 0 = oculto, 1 = visible
    var menuState = 0,
        $menuMobile = $('.menu-mobile'),

        vWidth = $(window).outerWidth(),
        vHeight = $(window).outerHeight();



    function menuMobileSize() {

        var $wHeight = $(window).outerHeight(),
            $brandHeight = $('.brand-content').outerHeight();


        $(".menu-open").height($wHeight);
        $(".menu-mobile__scroll").height($wHeight - $brandHeight);

    }

    $(window).on('resize', function () {
        if ($windowWidth.any() > 992) {
            $menuMobile.hide();
        }
        menuMobileSize();

    });


    $(".button-content").on("click", function () {

        $(".menu-mobile").stop(true, true).animate({
            height: 'toggle'
        }, 500, 'easeInOutSine', function () {
            $menuMobile.addClass('menu-open');
            menuMobileSize();
        });

        return false;

    });



    $('.menu-mobile').find('a').on('click', function () {
        $menuMobile.slideUp(500);
    });

} 

        
        
//////////////////////////////////////////////////// STICKY top nav

function stickyNav() {

    $('.sticky--header').each(function () {

        var $stickyEle = $(this),
            sticky;
        if ($stickyEle.length) {
            sticky = new Waypoint.Sticky({
                element: $stickyEle[0],
                wrapper: '<div class="sticky-wrapper" />'
            })
        }

    });

}

////////////////////////////////////////////////////FancyBox

function lightFancy(){

    if ($('.fancybox').length > 0 || $('.fancybox-media').length > 0 || $('.fancybox-various').length > 0) {

        $(".fancybox").fancybox({
            padding: 0,
            beforeShow: function () {
                this.title = $(this.element).attr('title');
                this.title = '<h4>' + this.title + '</h4>' + '<p>' + $(this.element).parent().find('img').attr('alt') + '</p>';
            },
            helpers: {
                title: {
                    type: 'inside'
                },
            }
        });

        $('.fancybox-media').fancybox({
            openEffect: 'none',
            closeEffect: 'none',
            helpers: {
                media: {}
            }
        });
    }

 if($('.fancybox1').length){    
    
  $(".fancybox1").fancybox();
     
 }
    
};

////////////////////////////////////////////////////smothScroll

function smoothScroll(){
    
    if($('body').hasClass('smoothy')){

    $("#navigation a, #navigation-left a, #navigation-mobile a, .jumbTo, .jumbIn").bind('click', function (event) {

        var navH = $('.top-nav, .top-nav-left').height();

        $("html, body").animate({
            scrollTop: $($(this).attr("href")).offset().top + (2) - (navH) + "px"
        }, {
            duration: 1000,
            easing: "easeInOutCirc"
        });

        return false;
        event.preventDefault();
    });
    }

};

////////////////////////////////////////////////////nav spy

function navSpy(){

if($('.top-nav').data('highlight')=== true){
 
    var aChildren = $("#navigation-left li:not(.no-count),#navigation li:not(.no-count), #navigation-mobile li:not(.no-count)").children(); // find the a children of the list items
    var aArray = []; // create the empty aArray
      
    for (var i=0; i < aChildren.length; i++) {    
        var aChild = aChildren[i];
        var ahref = $(aChild).attr('href');
        aArray.push(ahref);

    } // this for loop fills the aArray with attribute href values

     
    $(window).scroll(function(){
        var windowPos = $(window).scrollTop() + 100; // get the offset of the window from the top of page
        var windowHeight = $(window).height() ; // get the height of the window
        var docHeight = $(document).height() ;

        for (var i=0; i < aArray.length; i++) {
            var theID = aArray[i];
            var divPos = $(theID).offset().top ; // get the offset of the div from the top of page
            var divHeight = $(theID).outerHeight() ; // get the height of the div in question
            if (windowPos >= divPos && windowPos < (divPos + divHeight)) {
                $("a[href='" + theID + "']").addClass("active");
            } else {
                $("a[href='" + theID + "']").removeClass("active");
            }
        }

        if(windowPos + windowHeight == docHeight) {
            if (!$("#navigation-left li:last-child a, #navigation-mobile li:last-child a").hasClass("active")) {
                var navActiveCurrent = $(".active").attr("href");
                $("a[href='" + navActiveCurrent + "']").removeClass("active");
                $("#navigation-left li:last-child a, #navigation-mobile li:last-child a").addClass("active");
            }
        }
    });

}
    
};

//////////////////////////////////////////////////// cbpFWSlider

function cbpFWSlider(){
    if($('#cbp-fwslider').length){
    $('#cbp-fwslider').cbpFWSlider();
    }
};

//////////////////////////////////////////////////// Q & A accordion

function qaAccordion(){

    $(".accordion > .accordion-group > a").on("click", function (e) {
        if ($(this).parent().has("div.accordionin")) {
            e.preventDefault();
        }

        if (!$(this).hasClass("open")) {
            // hide any open menus and remove all other classes
            $("div.accordionin").slideUp(350);
            $(".accordion > .accordion-group > a").removeClass("open");

            // open our new menu and add the open class
            $(this).next("div.accordionin").slideDown(350);
            $(this).addClass("open");
        } else if ($(this).hasClass("open")) {
            $(this).removeClass("open");
            $(this).next("div.accordionin").slideUp(350);
        }
    });


};
        
        
        
        
        
        
        
//////////////////////////////////////////////////// V accordion

function vaAccordion(){
    
    if($('#va-accordion').length){
    $('#va-accordion').vaccordion({

    });
    }

};

////////////////////////////////////////////////////TABS

function standardTab(){
    
    if($('.tabWrap').length){

    //Default Action
    $(".tab_content").hide(); //Hide all content
    $("ul.tabs li:first").addClass("active").show(); //Activate first tab
    $(".tab_content:first").show(); //Show first tab content

    //On Click Event
    $("ul.tabs li").click(function () {
        $("ul.tabs li").removeClass("active"); //Remove any "active" class
        $(this).addClass("active"); //Add "active" class to selected tab
        $(".tab_content").hide(); //Hide all tab content
        var activeTab = $(this).find("a").attr("href"); //Find the rel attribute value to identify the active tab + content
        $(activeTab).fadeIn(); //Fade in the active content
        return false;
    });
    }

};

////////////////////////////////////////////////////ROTATOR TESTIMONIAL

function qRotator(){
if($('#cbp-qtrotator').length){
    $('#cbp-qtrotator').cbpQTRotator();

}
};

////////////////////////////////////////////////////standard Carousel

function standardCarousel(){
    
 if($('.owl-cclients').length){    

    $(".owl-cclients").owlCarousel({
        navigation: true,
        navigationText : ["",""],
        pagination : false,
        items : 5,
    });
 }
    
    
};

////////////////////////////////////////////////////standard Testimonial

        
function standardTestimonial(){
    
 $('.owl-testimonial').each(function(){
     
    var $this = $(this);
     
if($this.length){     

    $this.owlCarousel({
        navigation: false,
        singleItem:true,
        autoHeight : true,
        transitionStyle : "fade",
        autoPlay:true,
        stopOnHover:true
    });
}

 });   
    
};
        

////////////////////////////////////////////////////MAP

function gMapInit() {

    if ($('#gmap').length) {

        $('#gmap').gMap({
            maptype: 'TERRAIN', // 'HYBRID', 'SATELLITE', 'ROADMAP' or 'TERRAIN'
            address: "London, England",
            zoom: 14,
            icon: {
                image: "img/marker/map-marker.png",
                iconsize: [76, 61],
                iconanchor: [40, 46]
            },
            controls: {
                panControl: true,
                zoomControl: true,
                mapTypeControl: true,
                scaleControl: false,
                streetViewControl: false,
                overviewMapControl: false,

            },
            markers: [

                {
                    address: "the mall, London",
                    html: "This is main head office",


    },
                {
                    address: "A4 strand, London",
                    html: "_address"
    },
                {
                    address: "stamford st, London",
                    html: "Thisa is an  another info  section"
    },

]
        });
    }
}

/*////////////////////////////////// COUNTER	*/ 	

function counter(){        
 if($('.timer-c').length){       
$(".timer-c").appear(function(){   
    $(this).countTo();
    });
 }
}

////////////////////////////////////////////////////BACK TO TOP

function backToTop() {
    if(typeof ($.scrollUp) == 'function'){
    $.scrollUp({
        scrollName: 'scrollUp', // Element ID
        scrollDistance: 300, // Distance from top/bottom before showing element (px)
        scrollFrom: 'top', // 'top' or 'bottom'
        scrollSpeed: 500, // Speed back to top (ms)
        easingType: 'linear', // Scroll to top easing (see http://easings.net/)
        animation: 'fade', // Fade, slide, none
        animationInSpeed: 200, // Animation in speed (ms)
        animationOutSpeed: 200, // Animation out speed (ms)
        scrollText: '', // Text for element, can contain HTML
        scrollTitle: false, // Set a custom <a> title if required. Defaults to scrollText
        scrollImg: false, // Set true to use image
        activeOverlay: false, // Set CSS color to display scrollUp active point, e.g '#00FFFF'
        zIndex: 2147483640 // Z-Index for the overlay
    });
    }

};

//////////////////////////////////////////////////// scrollReveal    

function scrollAnimation(){
    if (typeof (scrollReveal) == 'function') {
var config = { mobile: false }   
 window.sr = new scrollReveal(config);
    }
}
    
//////////////////////////////////////////////////// PARALLAX

function mainParallax(){        
    var parallaxEl = $('[class^="parallax-"]');
     parallaxEl.each(function(){

        var $this = $(this);

        if(!isMobile.any() && typeof ($.stellar) == 'function'){
            $this.appear(function() {
           $.stellar({
            horizontalScrolling: false,
            scrollProperty: "scroll",
            positionProperty: "position",
            hideDistantElements: false,
        });
           }, {
            accY: -10
        });
   }   

});
}
//////////////////////////////////////////////////// HIDE COUNTER FILTER ON SMALL DEVICES

/*if( isMobile.any() ){
    $('.cbp-filter-counter').hide();
}*/

//////////////////////////////////////////////////// FIXING BACKGROUND IMAGES ON TOUCH DEVICES    

function resetBgParallax() {

    if (isMobile.any()) {
        $('.parallax-band1,.parallax-band').css({
            'background-size': 'auto',
            'background-attachment': 'scroll',
        });
    };
}

/*********************************************
	-	MEDIA PLAYER	-
**********************************************/ 
        
function mediaElements(){
    $('.media-player').each(function(){
        if($(this).length){
        $(this).mediaelementplayer(); 
        }
    })
    
}
        
        
/*********************************************
	-	camraSlider	-
**********************************************/        

function camraSlider() {
    if ($('#camera_wrap_1').length) {

        jQuery('#camera_wrap_1').camera({
            thumbnails: false
        });
    }
}
   
        
/*********************************************
	-	nivoSliderInit	-
**********************************************/        
        
function nivoSliderInit() {
    if ($('#nivo-slider').length) {
        $('#nivo-slider').nivoSlider();
    }
}
        
/*********************************************
	-	masoneryLayout	-
**********************************************/  
        
function masoneryLayout() {
    if (typeof (Masonry) == 'function') {
        var container = document.querySelector('#masWrap');
        var msnry = new Masonry(container, {
            // options
            gutter: 20,
            itemSelector: '.post'
        });
    }
}
        
/*********************************************
	-	toolTip	-
**********************************************/         
        
function toolTip() {
    if ($('.toolTip').length) {
        $('.toolTip').colorTip({
            color: 'yellow'
        });
    }
}

/*********************************************
    -	daSlider	-
***********************************************/
        
function daSlider() {

    if ($('#da-slider').length) {
        $('#da-slider').cslider({
            autoplay: true,
            bgincrement: 450
        });
    }
}
        
/*********************************************
    -	gridSlider	-
***********************************************/        
        
function gridSlider() {

    if ($('#tp-grid').length) {
        var $grid = $('#tp-grid'),
            $name = $('#the-name'),
            $close = $('#close'),
            $loader = $('<div class="loader"><i></i><i></i><i></i><i></i><i></i><i></i><span>Loading...</span></div>').insertBefore($grid),
            stapel = $grid.stapel({
                onLoad: function () {
                    $loader.remove();
                },
                onBeforeOpen: function (pileName) {
                    $name.html(pileName);
                },
                onAfterOpen: function (pileName) {
                    $close.show();
                }
            });

        $close.on('click', function () {
            $close.hide();
            $name.empty();
            stapel.closePile();
        });
    }
}
        


////////////////////////////////////////////////////revolution slider
 function revSlider() {

     var tpj=jQuery;
            
            var revapi1050;
            tpj(document).ready(function() {
                if (tpj("#rev_slider_1050_1").length) {
                if(tpj("#rev_slider_1050_1").revolution == undefined){
                    revslider_showDoubleJqueryError("#rev_slider_1050_1");
                }else{
                    revapi1050 = tpj("#rev_slider_1050_1").show().revolution({
                        sliderType:"standard",
jsFileLocation:"revolution/js/",
                        sliderLayout:"fullscreen",
                        dottedOverlay:"none",
                        delay:9000,
                        navigation: {
                            keyboardNavigation:"on",
                            keyboard_direction: "vertical",
                            mouseScrollNavigation:"off",
                            mouseScrollReverse:"default",
                            onHoverStop:"off",
                            touch:{
                                touchenabled:"on",
                                swipe_threshold: 75,
                                swipe_min_touches: 50,
                                swipe_direction: "vertical",
                                drag_block_vertical: false
                            }
                            ,
                            bullets: {
                                enable:true,
                                hide_onmobile:true,
                                hide_under:1024,
                                style:"hephaistos",
                                hide_onleave:false,
                                direction:"vertical",
                                h_align:"right",
                                v_align:"center",
                                h_offset:30,
                                v_offset:0,
                                space:5,
                                tmp:''
                            }
                        },
                        responsiveLevels:[1240,1024,778,480],
                        visibilityLevels:[1240,1024,778,480],
                        gridwidth:[1400,1240,778,480],
                        gridheight:[868,768,960,720],
                        lazyType:"none",
                        shadow:0,
                        spinner:"spinner2",
                        stopLoop:"on",
                        stopAfterLoops:0,
                        stopAtSlide:1,
                        shuffle:"off",
                        autoHeight:"off",
                        fullScreenAutoWidth:"off",
                        fullScreenAlignForce:"off",
                        fullScreenOffsetContainer: "",
                        fullScreenOffset: "",
                        disableProgressBar:"on",
                        hideThumbsOnMobile:"off",
                        hideSliderAtLimit:0,
                        hideCaptionAtLimit:0,
                        hideAllCaptionAtLilmit:0,
                        debugMode:false,
                        fallbacks: {
                            simplifyAll:"off",
                            nextSlideOnWindowFocus:"off",
                            disableFocusListener:false,
                        }
                    });
                }
                }
            }); /*ready*/
 }        



 function heroIntro(){
  var tpj=jQuery;
            
            var revapi1058;
            tpj(document).ready(function() {
                if (tpj("#rev_slider_1058_1").length) {
                if(tpj("#rev_slider_1058_1").revolution == undefined){
                    revslider_showDoubleJqueryError("#rev_slider_1058_1");
                }else{
                    revapi1058 = tpj("#rev_slider_1058_1").show().revolution({
                        sliderType:"hero",
jsFileLocation:"revolution/js/",
                        sliderLayout:"auto",
                        dottedOverlay:"none",
                        delay:9000,
                        navigation: {
                        },
                        responsiveLevels:[1240,1024,778,480],
                        visibilityLevels:[1240,1024,778,480],
                        gridwidth:[1240,1024,778,480],
                        gridheight:[868,768,960,720],
                        lazyType:"none",
                        parallax: {
                            type:"scroll",
                            origo:"slidercenter",
                            speed:1000,
                            levels:[5,10,15,20,25,30,35,40,45,46,47,48,49,50,51,55],
                            type:"scroll",
                        },
                        shadow:0,
                        spinner:"spinner2",
                        autoHeight:"off",
                        fullScreenAutoWidth:"off",
                        fullScreenAlignForce:"off",
                        fullScreenOffsetContainer: "",
                        fullScreenOffset: "225",
                        disableProgressBar:"on",
                        hideThumbsOnMobile:"off",
                        hideSliderAtLimit:0,
                        hideCaptionAtLimit:0,
                        hideAllCaptionAtLilmit:0,
                        debugMode:false,
                        fallbacks: {
                            simplifyAll:"off",
                            disableFocusListener:false,
                        }
                    });
                }
                }
            }); /*ready*/
        
 }


 function zoomSlider(){
    var tpj=jQuery;
            
            var revapi1060;
            tpj(document).ready(function() {
                if (tpj("#rev_slider_1060_1").length) {
                if(tpj("#rev_slider_1060_1").revolution == undefined){
                    revslider_showDoubleJqueryError("#rev_slider_1060_1");
                }else{
                    revapi1060 = tpj("#rev_slider_1060_1").show().revolution({
                        sliderType:"standard",
                        jsFileLocation:"revolution/js/",
                        sliderLayout:"fullwidth",
                        dottedOverlay:"none",
                        delay:9000,
                        navigation: {
                            keyboardNavigation:"off",
                            keyboard_direction: "vertical",
                            mouseScrollNavigation:"off",
                            mouseScrollReverse:"default",
                            onHoverStop:"off",
                            touch:{
                                touchenabled:"on",
                                swipe_threshold: 75,
                                swipe_min_touches: 50,
                                swipe_direction: "vertical",
                                drag_block_vertical: false
                            }
                        },
                        responsiveLevels:[1240,1024,778,480],
                        visibilityLevels:[1240,1024,778,480],
                        gridwidth:[1400,1240,778,480],
                        gridheight:[768,768,960,720],
                        lazyType:"none",
                        parallax: {
                            type:"mouse+scroll",
                            origo:"slidercenter",
                            speed:2000,
                            levels:[1,2,3,20,25,30,35,40,45,50,46,47,48,49,50,55],
                            type:"mouse+scroll",
                            disable_onmobile:"on"
                        },
                        shadow:0,
                        spinner:"off",
                        stopLoop:"on",
                        stopAfterLoops:0,
                        stopAtSlide:1,
                        shuffle:"off",
                        autoHeight:"off",
                        disableProgressBar:"on",
                        hideThumbsOnMobile:"off",
                        hideSliderAtLimit:0,
                        hideCaptionAtLimit:0,
                        hideAllCaptionAtLilmit:0,
                        debugMode:false,
                        fallbacks: {
                            simplifyAll:"off",
                            nextSlideOnWindowFocus:"off",
                            disableFocusListener:false,
                        }
                    });
                }
                }
            }); /*ready*/
 }

 zoomSlider();

revSlider(); 
mainPreLoader();        
topBarBlock();
revSliderCarousel();
stickyNav();        
navTrigger();        
lightFancy();
smoothScroll();
navSpy();
standardTestimonial();        
cbpFWSlider();
qaAccordion();
standardTab();
standardCarousel();        
vaAccordion();
qRotator();   
counter();        
gMapInit();
backToTop();        
scrollAnimation();
camraSlider();
nivoSliderInit();        
resetBgParallax();
masoneryLayout();
toolTip();
daSlider();
gridSlider();        
mainParallax();
        heroIntro();
        
        jQuery("#grid-container").on('updateSinglePageInlineComplete.cbp', function() {

        mediaElements();
   
    });
        
        
});
    
